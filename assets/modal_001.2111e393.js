var M=Object.defineProperty;var k=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var w=(a,o,e)=>o in a?M(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e,x=(a,o)=>{for(var e in o||(o={}))$.call(o,e)&&w(a,e,o[e]);if(k)for(var e of k(o))A.call(o,e)&&w(a,e,o[e]);return a};import{$ as y}from"./dom.2a1e19d1.js";function P(a,o){const e=document.createElement("div");return e.className=o,a.appendChild(e),e}function B(a,o){const e=document.body,f=x({},e.style),u={duration:"--modal-duration"},t={},d=[];let p=null,L=0,h=o.zIndex;const _=()=>y(`.${a}`,e),z=()=>(h+=2,h),b=r=>{r.finally(()=>{p=null}),p=r},C=(r,s)=>{p||d.includes(r)||b(new Promise(v=>{const{enterClass:c,duration:l}=o.animation,{onBeforeEnter:n,onAfterEnter:m}=s,g=t[r];let i=_();i||(i=P(e,a)),d.push(r),e.style.overflow="hidden",e.style.setProperty(u.duration,`${o.animation.duration}ms`),g.element.style.zIndex=`${z()}`,g.element.style.display=g.style.display,i.style.zIndex=`${+g.element.style.zIndex-1}`,d.length<=1&&i.classList.add(c),n&&n(),setTimeout(()=>{d.length<=1&&(i==null||i.classList.remove(c)),m&&m(),v()},l)}))},E=(r,s)=>{p||!d.includes(r)||b(new Promise(v=>{const{leaveClass:c,duration:l}=o.animation,{onBeforeLeave:n,onAfterLeave:m}=s,g=t[r],i=_();d.pop(),d.length||i.classList.add(c),n&&n(),setTimeout(()=>{if(g.element.style.zIndex="",g.element.style.display="none",!d.length)i.classList.remove(c),e.removeChild(i),e.style.overflow=f.overflow,e.style.removeProperty(u.duration),h=o.zIndex;else{const I=d.slice(-1)[0];i.style.zIndex=`${+t[I].element.style.zIndex-1}`}m&&m(),v()},l)}))};return{useModal:r=>{const{element:s,closeable:v=!1,onModalClick:c}=r;let l="";return s&&(l=`${a}-${++L}`,t[l]={element:s,style:x({},s.style),enter:()=>C(l,r),leave:()=>E(l,r)},s.style.display="none",s.addEventListener("click",async n=>{if(n.target===s&&!p){if(c&&c(),v)return t[l].leave();b(new Promise(m=>{t[l].element.classList.add("dialog-shake"),setTimeout(()=>{t[l].element.classList.remove("dialog-shake"),m()},o.animation.duration)}))}})),{enter:()=>{var n;return(n=t[l])==null?void 0:n.enter()},leave:()=>{var n;return(n=t[l])==null?void 0:n.leave()}}}}}const{useModal:Y}=B("modal",{zIndex:1e3,animation:{duration:300,enterClass:"modal-enter",leaveClass:"modal-leave"}});y.all("[data-dialog]").forEach(a=>{const o=a.dataset.dialog,e=a.dataset.dialogCloseable==="true",f={enterClass:"dialog-enter",leaveClass:"dialog-leave"},u=Y({element:a,closeable:e,onModalClick:()=>{},onBeforeEnter:()=>{a.classList.add(f.enterClass)},onAfterEnter:()=>{a.classList.remove(f.enterClass)},onBeforeLeave:()=>{a.classList.add(f.leaveClass)},onAfterLeave:()=>{a.classList.remove(f.leaveClass)}});y.all(`[data-dialog-enter="${o}"]`).forEach(t=>{t.addEventListener("click",u.enter)}),y.all(".dialog .dialog__close-button",a).forEach(t=>{t.addEventListener("click",u.leave)})});
